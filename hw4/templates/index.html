{% extends 'layout.html' %}

{% block title %}My plants{% endblock %}

{% block content %}
<h2>My Registered Plants</h2>

<a href="{{ url_for('add_plant') }}" class="btn">Add New Plant</a>

{% if plants %}
<div class="plant-grid-container">

    {% for plant in plants %}
    <div class="plant-card">

        {% if plant['image_url'] %}
        <img src="{{ url_for('static', filename=plant['image_url']) }}" alt="{{ plant['name'] }}"
            class="plant-card-img">
        {% else %}
        <div class="plant-card-img-placeholder">
            <span>No image</span>
        </div>
        {% endif %}

        <div class="plant-card-body">
            <strong>{{ plant['name'] }}</strong>
            (<em>Species: {{ plant['species'] }}</em>)
            <br>
        
            <span class="plant-date">
                Last watered: {{ plant['last_watered'].strftime('%d/%m/%Y a las %I:%M %p') }}
            </span>
            <br>
        
            <form action="{{ url_for('water_plant', plant_id=plant['_id']) }}" method="POST" style="margin-top: 10px;">
                <button type="submit" class="btn-water">
                    Water
                </button>
            </form>
        
            <form action="{{ url_for('delete_plant', plant_id=plant['_id']) }}" method="POST" style="margin-top: 5px;"
                onsubmit="return confirm('Are you sure you want to delete this plant?');">
        
                <button type="submit" class="btn-delete">
                    Delete
                </button>
            </form>
        </div>

    </div>
    {% endfor %}
</div>
{% else %}
<div class="no-plants-message">
    You have no registered plants. Add one!
</div>
{% endif %}

{% endblock %}