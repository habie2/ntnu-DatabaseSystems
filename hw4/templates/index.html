{% extends "layout.html" %}

{% block content %}
<h2>Mi Jardín Virtual</h2>
<a href="{{ url_for('add_plant') }}" class="btn">Añadir Nueva Planta</a>

<div style="margin-top: 20px;">
    {% if plants.count() > 0 %}
    <ul class="plant-list">
        <!-- Itera sobre cada planta obtenida de la base de datos -->
        {% for plant in plants %}
        <li class="plant-item">
            <div>
                <strong>{{ plant.name }}</strong> (<em>{{ plant.species }}</em>)
                <br>
                <small>Último riego: {{ plant.last_watered.strftime('%d de %B de %Y') }}</small>
            </div>
            <div class="plant-actions">
                <!-- Enlace para editar la planta -->
                <a href="{{ url_for('edit_plant', plant_id=plant._id) }}" class="btn btn-secondary">Editar</a>
                <!-- Formulario para eliminar la planta (más seguro que un enlace) -->
                <form action="{{ url_for('delete_plant', plant_id=plant._id) }}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-danger"
                        onclick="return confirm('¿Estás seguro de que quieres eliminar esta planta?');">Eliminar</button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <!-- Mensaje que se muestra si no hay plantas -->
    <p>Aún no has añadido ninguna planta. ¡Empieza ahora!</p>
    {% endif %}
</div>
{% endblock %}